{
  "travisci": {},
  "circleci": {
    "docker-build": "quay.io/wakaba/apploach",
    "merger": 1,
    "gaa": 1,
    "heroku": true,

    "build": [
      {" docker pull quay.io/wakaba/docker-perl-app-base && docker pull minio/minio && docker pull mysql/mysql-server": {
        "background": true}},
      "make deps-circleci"
    ],
    "tests": [
      "rm -fr $CIRCLE_ARTIFACTS/pid",
      {"./perl t_deps/bin/env-for-circleci.pl > $CIRCLE_ARTIFACTS/servers-http-$CIRCLE_NODE_INDEX.txt.dat 2>&1": {
        "background": true}},
      "while [ ! -e $CIRCLE_ARTIFACTS/pid ]; do sleep 1; done",
      "if [ ! -e $CIRCLE_ARTIFACTS/pid ]; then cat $CIRCLE_ARTIFACTS/env.pl; fi; cat $CIRCLE_ARTIFACTS/pid",
      
      "SS_ENV_FILE=$CIRCLE_ARTIFACTS/env.pl make test"
    ]
  }
}
